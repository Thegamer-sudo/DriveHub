@{
    ViewData["Title"] = "Admin Dashboard";
}

<h1>Welcome, @ViewBag.AdminName!</h1>

<div class="row mt-4">
    <div class="col-md-3">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <h5 class="card-title">Total Students</h5>
                <h2>@ViewBag.StudentCount</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-success">
            <div class="card-body">
                <h5 class="card-title">Total Instructors</h5>
                <h2>@ViewBag.InstructorCount</h2>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-info">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start">
                    <h5 class="card-title">Total Revenue</h5>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="revenueToggle" checked>
                        <label class="form-check-label" for="revenueToggle" title="Toggle revenue visibility">
              
                        </label>
                    </div>
                </div>
                <h2 class="revenue-amount">R@(ViewBag.TotalRevenue)</h2>
                <div class="revenue-hidden" style="display: none;">
                    <h2>•••••••</h2>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <h5 class="card-title">Quick Actions</h5>
                <a href="@Url.Action("Students")" class="btn btn-light btn-sm">View Students</a>
                <a href="@Url.Action("Payments")" class="btn btn-light btn-sm mt-1">View Payments</a>
            </div>
        </div>
    </div>
</div>

<!-- Management Cards Row -->
<div class="row mt-4">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="mb-3" style="font-size: 3rem;">👨‍🏫</div>
                <h5 class="card-title">Manage Assignments</h5>
                <p class="card-text">Assign instructors to students and manage relationships</p>
                <a href="/AdminDashboard/ManageAssignments" class="btn btn-primary">Manage Assignments</a>
            </div>
        </div>
    </div>

    <!-- Student Feedback Card -->
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="mb-3" style="font-size: 3rem;">📋</div>
                <h5 class="card-title">Student Feedback</h5>
                <p class="card-text">View and respond to student feedback and suggestions</p>
                <a href="/AdminDashboard/Feedback" class="btn btn-info">View Feedback</a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>Quick Navigation</h5>
            </div>
            <div class="card-body">
                <a href="@Url.Action("Students")" class="btn btn-primary">Manage Students</a>
                <a href="@Url.Action("Instructors")" class="btn btn-secondary">View Instructors</a>
                <a href="@Url.Action("Payments")" class="btn btn-success">Payment History</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Revenue Toggle Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const revenueToggle = document.getElementById('revenueToggle');
            const revenueAmount = document.querySelector('.revenue-amount');
            const revenueHidden = document.querySelector('.revenue-hidden');

            // Check if toggle state exists in localStorage
            const isRevenueVisible = localStorage.getItem('revenueVisible') !== 'false';
            revenueToggle.checked = isRevenueVisible;
            updateRevenueVisibility(isRevenueVisible);

            // Toggle event
            revenueToggle.addEventListener('change', function() {
                const isVisible = this.checked;
                localStorage.setItem('revenueVisible', isVisible);
                updateRevenueVisibility(isVisible);
            });

            function updateRevenueVisibility(isVisible) {
                if (isVisible) {
                    revenueAmount.style.display = 'block';
                    revenueHidden.style.display = 'none';
                } else {
                    revenueAmount.style.display = 'none';
                    revenueHidden.style.display = 'block';
                }
            }
        });
    </script>

    <style>
        .revenue-hidden h2 {
            font-family: 'Courier New', monospace;
            letter-spacing: 3px;
            color: #e0e0e0;
        }

        .form-switch .form-check-input {
            width: 2.5em;
            height: 1.3em;
            margin-top: 0.2em;
        }
    </style>
}