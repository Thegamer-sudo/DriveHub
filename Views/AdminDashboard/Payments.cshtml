@model List<Receipt>

@{
    ViewData["Title"] = "Payment History";
}

<h1>Payment History</h1>
<p class="lead">All payment receipts in the system</p>

@if (Model.Any())
{
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>Receipt #</th>
                        <th>Student</th>
                        <th>Package</th>
                        <th>Amount</th>
                        <th>Card Last 4</th>
                        <th>Payment Date</th>
                        <th>Cardholder</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var receipt in Model)
                {
                            <tr>
                                <td><strong>@receipt.ReceiptNumber</strong></td>
                                <td>@receipt.User.FullName</td>
                                <td>@receipt.Package.Type</td>
                                <td><strong>R@(receipt.Amount)</strong></td>
                                <td>****@receipt.Last4Digits</td>
                                <td>@receipt.PaymentDate.ToString("dd MMM yyyy HH:mm")</td>
                                <td>@receipt.CardHolderName</td>
                            </tr>
                }
                </tbody>
            </table>
        </div>

        <div class="card mt-4">
            <div class="card-body">
                <h5>Total Revenue: <strong>R@(Model.Sum(r => r.Amount))</strong></h5>
            </div>
        </div>
}
else
{
        <div class="alert alert-info">
            <h4>No Payments Found</h4>
            <p>No payments have been processed yet.</p>
        </div>
}

<a href="@Url.Action("Index")" class="btn btn-secondary">Back to Dashboard</a>